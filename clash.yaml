port: 7801
socks-port: 7801
allow-lan: true
mode: Rule
log-level: info
external-controller: '127.0.0.1:9090'
dns:
  enable: true
  listen: '127.0.0.1:53'
  ipv6: false
  enhanced-mode: fake-ip
  nameserver:
    - 'https://doh.pub/dns-query'
    - 'https://dns.alidns.com/dns-query'
    - 'tls://dns.rubyfish.cn:853'
  fallback:
    - 'https://1.1.1.1/dns-query'
    - 'https://dns.google/dns-query'
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
cfw-latency-timeout: 3000
cfw-latency-url: 'http://cp.cloudflare.com/generate_204'
proxy-providers:
  proxies:
    type: http
    path: ./proxy/haisto.yaml
    url: 'https://proxies.haisto.cn/clash/proxies?filter=r'
    interval: 3600
    health-check:
      enable: true
      url: 'http://www.gstatic.com/generate_204'
      interval: 300
proxy-groups:
  - name: "\U0001F530 节点选择"
    type: select
    proxies:
      - "\U0001F300 自动选择"
      - "\U0001F530 手动切换"
      - "\U0001F9FF 故障转移"
      - "\U0001F3AF 全球直连"
  - name: "\U0001F530 手动切换"
    type: select
    interval: 43200
    use:
      - proxies
  - name: "\U0001F300 自动选择"
    type: url-test
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    tolerance: 50
    use:
      - proxies
  - name: "\U0001F9FF 故障转移"
    type: fallback
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    tolerance: 50
    use:
      - proxies
  - name: "\U0001F41F 黑白名单"
    type: select
    proxies:
      - "\U0001F3AF 全球直连"
      - "\U0001F530 节点选择"
  - name: "\U0001F3AF 全球直连"
    type: select
    proxies:
      - DIRECT
  - name: "\U0001F343 净化拦截"
    type: select
    proxies:
      - REJECT
rules:
  - "DOMAIN,clash.razord.top,\U0001F3AF 全球直连"
  - "DOMAIN,yacd.haishan.me,\U0001F3AF 全球直连"
  - "DOMAIN-SUFFIX,bing.com,\U0001F530 节点选择"
  - "DOMAIN-SUFFIX,msn.com,\U0001F530 节点选择"
  - "RULE-SET,applications,\U0001F3AF 全球直连"
  - "RULE-SET,private,\U0001F3AF 全球直连"
  - "RULE-SET,tld-not-cn,\U0001F530 节点选择"
  - "RULE-SET,gfw,\U0001F530 节点选择"
  - "RULE-SET,greatfire,\U0001F530 节点选择"
  - "RULE-SET,telegramcidr,\U0001F530 节点选择"
  - "RULE-SET,reject,\U0001F343 净化拦截"
  - "MATCH,\U0001F41F 黑白名单"
rule-providers:
  reject:
    type: http
    behavior: domain
    url: 'https://raw.gitmirror.com/Loyalsoldier/clash-rules/release/reject.txt'
    path: ./rule/reject.yaml
    interval: 86400
  proxy:
    type: http
    behavior: domain
    url: 'https://raw.gitmirror.com/Loyalsoldier/clash-rules/release/proxy.txt'
    path: ./rule/proxy.yaml
    interval: 86400
  direct:
    type: http
    behavior: domain
    url: 'https://raw.gitmirror.com/Loyalsoldier/clash-rules/release/direct.txt'
    path: ./rule/direct.yaml
    interval: 86400
  private:
    type: http
    behavior: domain
    url: 'https://raw.gitmirror.com/Loyalsoldier/clash-rules/release/private.txt'
    path: ./rule/private.yaml
    interval: 86400
  gfw:
    type: http
    behavior: domain
    url: 'https://raw.gitmirror.com/Loyalsoldier/clash-rules/release/gfw.txt'
    path: ./rule/gfw.yaml
    interval: 86400
  greatfire:
    type: http
    behavior: domain
    url: 'https://raw.gitmirror.com/Loyalsoldier/clash-rules/release/greatfire.txt'
    path: ./rule/greatfire.yaml
    interval: 86400
  telegramcidr:
    type: http
    behavior: ipcidr
    url: >-
      https://raw.gitmirror.com/Loyalsoldier/clash-rules/release/telegramcidr.txt
    path: ./rule/telegramcidr.yaml
    interval: 86400
  applications:
    type: http
    behavior: classical
    url: >-
      https://raw.gitmirror.com/Loyalsoldier/clash-rules/release/applications.txt
    path: ./rule/applications.yaml
    interval: 86400
  cncidr:
    type: http
    behavior: ipcidr
    url: 'https://raw.gitmirror.com/Loyalsoldier/clash-rules/release/cncidr.txt'
    path: ./rule/cncidr.yaml
    interval: 86400
  lancidr:
    type: http
    behavior: ipcidr
    url: 'https://raw.gitmirror.com/Loyalsoldier/clash-rules/release/lancidr.txt'
    path: ./rule/lancidr.yaml
    interval: 86400
  tld-not-cn:
    type: http
    behavior: domain
    url: 'https://raw.gitmirror.com/Loyalsoldier/clash-rules/release/tld-not-cn.txt'
    path: ./rule/tld-not-cn.yaml
    interval: 86400
  apple:
    type: http
    behavior: domain
    url: 'https://raw.gitmirror.com/Loyalsoldier/clash-rules/release/apple.txt'
    path: ./rule/apple.yaml
    interval: 86400
  icloud:
    type: http
    behavior: domain
    url: 'https://raw.gitmirror.com/Loyalsoldier/clash-rules/release/icloud.txt'
    path: ./rule/icloud.yaml
    interval: 86400
  google:
    type: http
    behavior: domain
    url: 'https://raw.gitmirror.com/Loyalsoldier/clash-rules/release/google.txt'
    path: ./rule/google.yaml
    interval: 86400
